{"version":3,"file":"GraphicsTest.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/context/InteractContext.ts","../../src/decorators.ts","../../src/context/RenderContext.ts","../../src/requestAnimationFrame-polyfill.ts","../../src/utils.ts","../../src/QunityEngine.ts","../../src/support/Vector2D.ts","../../src/support/Matrix.ts","engine.ts","GraphicsTest.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * Created by rockyl on 2018/11/7.\n *\n * 交互上下文\n */\n\nimport {QunityEngine} from \"../QunityEngine\";\n\nconst ua = navigator.userAgent.toLowerCase();\nconst isMobile = (ua.indexOf('mobile') !== -1 || ua.indexOf('android') !== -1);\n\ninterface InteractContextOption {\n\t/**\n\t * 画布\n\t */\n\tcanvas: any;\n\t/**\n\t * 触摸句柄\n\t */\n\ttouchHandlers: any;\n\t/**\n\t * 触摸开关\n\t */\n\ttouchEnabled: boolean;\n}\n\n/**\n * 交互上下文\n */\nexport default class InteractContext {\n\tprotected canvas;\n\tprotected touchHandlers;\n\tprotected scaleX;\n\tprotected scaleY;\n\tprotected rotation;\n\n\tprivate engine: QunityEngine;\n\n\tconstructor(engine: QunityEngine) {\n\t\tthis.engine = engine;\n\t}\n\n\t/**\n\t * 装配上下文\n\t * @param options\n\t */\n\tsetup(options: InteractContextOption = <InteractContextOption>{}) {\n\t\tconst {canvas, touchHandlers, touchEnabled} = options;\n\n\t\tthis.touchHandlers = touchHandlers;\n\n\t\tthis.canvas = canvas;\n\n\t\tif (touchEnabled) {\n\t\t\tthis.addListeners();\n\t\t}\n\t}\n\n\t/**\n\t * 更新缩放模式\n\t * @param scaleX\n\t * @param scaleY\n\t * @param rotation\n\t */\n\tupdateScale(scaleX, scaleY, rotation) {\n\t\tthis.scaleX = scaleX;\n\t\tthis.scaleY = scaleY;\n\t\tthis.rotation = rotation;\n\t}\n\n\t/**\n\t * 适配鼠标事件\n\t */\n\tprivate addListeners() {\n\t\tif (window.navigator.msPointerEnabled) {\n\t\t\tthis.canvas.addEventListener(\"MSPointerDown\", (event) => {\n\t\t\t\tevent.identifier = event.pointerId;\n\t\t\t\tthis.onTouchBegin(event);\n\t\t\t\tthis.prevent(event);\n\t\t\t}, false);\n\t\t\tthis.canvas.addEventListener(\"MSPointerMove\", (event) => {\n\t\t\t\tevent.identifier = event.pointerId;\n\t\t\t\tthis.onTouchMove(event);\n\t\t\t\tthis.prevent(event);\n\t\t\t}, false);\n\t\t\tthis.canvas.addEventListener(\"MSPointerUp\", (event) => {\n\t\t\t\tevent.identifier = event.pointerId;\n\t\t\t\tthis.onTouchEnd(event);\n\t\t\t\tthis.prevent(event);\n\t\t\t}, false);\n\t\t} else {\n\t\t\tif (!isMobile) {\n\t\t\t\tthis.addMouseListener();\n\t\t\t}\n\t\t\tthis.addTouchListener();\n\t\t}\n\t}\n\n\t/**\n\t * 阻断页面拖动\n\t * @param event\n\t */\n\tprivate prevent(event) {\n\t\tevent.stopPropagation();\n\t\tif (event[\"isScroll\"] != true && !this.canvas['userTyping']) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\t/**\n\t * 增加鼠标事件\n\t */\n\tprivate addMouseListener() {\n\t\tthis.canvas.addEventListener(\"mousedown\", this.onTouchBegin.bind(this));\n\t\tthis.canvas.addEventListener(\"mousemove\", this.onMouseMove.bind(this));\n\t\tthis.canvas.addEventListener(\"mouseup\", this.onTouchEnd.bind(this));\n\t}\n\n\t/**\n\t * 增加触摸事件\n\t */\n\tprivate addTouchListener() {\n\t\tthis.canvas.addEventListener(\"touchstart\", (event) => {\n\t\t\tfor (let touch of event.changedTouches) {\n\t\t\t\tthis.onTouchBegin(touch);\n\t\t\t}\n\t\t\tthis.prevent(event);\n\t\t}, false);\n\t\tthis.canvas.addEventListener(\"touchmove\", (event) => {\n\t\t\tfor (let touch of event.changedTouches) {\n\t\t\t\tthis.onTouchMove(touch);\n\t\t\t}\n\t\t\tthis.prevent(event);\n\t\t}, false);\n\t\tthis.canvas.addEventListener(\"touchend\", (event) => {\n\t\t\tfor (let touch of event.changedTouches) {\n\t\t\t\tthis.onTouchEnd(touch);\n\t\t\t}\n\t\t\tthis.prevent(event);\n\t\t}, false);\n\t\tthis.canvas.addEventListener(\"touchcancel\", (event) => {\n\t\t\tfor (let touch of event.changedTouches) {\n\t\t\t\tthis.onTouchEnd(touch);\n\t\t\t}\n\t\t\tthis.prevent(event);\n\t\t}, false);\n\t}\n\n\tprivate onTouchBegin(event) {\n\t\tlet location = this.getLocation(event);\n\t\tthis.touchHandlers.onTouchBegin(location);\n\t}\n\n\tprivate onMouseMove(event) {\n\t\tif (event.buttons === 0) {\n\t\t\tthis.onTouchEnd(event);\n\t\t} else {\n\t\t\tthis.onTouchMove(event);\n\t\t}\n\t}\n\n\tprivate onTouchMove(event) {\n\t\tlet location = this.getLocation(event);\n\t\tthis.touchHandlers.onTouchMove(location);\n\n\t}\n\n\tprivate onTouchEnd(event) {\n\t\tlet location = this.getLocation(event);\n\t\tthis.touchHandlers.onTouchEnd(location);\n\t}\n\n\tprivate getLocation(event) {\n\t\t//return this.engine.pagePosToCanvasPos(event.pageX, event.pageY, event.identifier)\n\t}\n}\n","/**\n * Created by rockyl on 2018/11/9.\n *\n * 装饰器\n */\n\n/**\n * 属性修改时触发\n * @param onModify\n */\nexport function fieldChanged(onModify) {\n\treturn function (target: any, key: string) {\n\t\tconst privateKey = '_' + key;\n\t\tObject.defineProperty(target, key, {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn this[privateKey];\n\t\t\t},\n\t\t\tset: function (v) {\n\t\t\t\tconst oldValue = this[privateKey];\n\t\t\t\tif (oldValue !== v) {\n\t\t\t\t\tthis[privateKey] = v;\n\t\t\t\t\tonModify.apply(this, [v, key, oldValue]);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n}\n\n/**\n * 属性变脏时设置宿主的dirty属性为true\n */\nexport const dirtyFieldDetector = fieldChanged(\n\tfunction (value, key, oldValue) {\n\t\tthis['dirty'] = true;\n\t}\n);\n\n/**\n * 深度属性变脏时设置宿主的dirty属性为true\n */\nexport const deepDirtyFieldDetector = fieldChanged(\n\tfunction (value, key, oldValue) {\n\t\tconst scope = this;\n\t\tscope['dirty'] = true;\n\t\tif (typeof value === 'object') {\n\t\t\tvalue['onModify'] = function(){\n\t\t\t\tscope['dirty'] = true;\n\t\t\t};\n\t\t}\n\t}\n);\n\n/**\n * 属性变脏时触发onModify方法\n */\nexport const dirtyFieldTrigger = fieldChanged(\n\tfunction (value, key, oldValue) {\n\t\tthis['onModify'] && this['onModify'](value, key, oldValue);\n\t}\n);\n\n/**\n * 深入属性变脏时触发onModify方法\n */\nexport const deepDirtyFieldTrigger = fieldChanged(\n\tfunction (value: any, key, oldValue) {\n\t\tif (this['onModify']) {\n\t\t\tthis['onModify'](value, key, oldValue);\n\n\t\t\tif (typeof value === 'object') {\n\t\t\t\tvalue['onModify'] = this['onModify'];\n\t\t\t}\n\t\t}\n\t}\n);\n","/**\n * Created by rockyl on 2018/11/5.\n *\n * 渲染上下文\n */\n\nimport {QunityEngine} from \"../QunityEngine\";\nimport {dirtyFieldTrigger} from \"../decorators\";\n\n/**\n * 缩放模式\n *\n * SHOW_ALL: 全可见\n * FIXED_WIDTH: 宽度固定\n * FIXED_HEIGHT: 高度固定\n */\nexport enum ScaleMode {\n\tSHOW_ALL = 'showAll',\n\tFIXED_WIDTH = 'fixedWidth',\n\tFIXED_HEIGHT = 'fixedHeight',\n\tNO_SCALE = 'noScale',\n\tNO_FIXED = 'noFixed',\n}\n\ninterface RenderContextOption {\n\t/**\n\t * 画布实例\n\t */\n\tcanvas: any;\n\t/**\n\t * 设计宽度\n\t */\n\tdesignWidth: number;\n\t/**\n\t * 设计高度\n\t */\n\tdesignHeight: number;\n\t/**\n\t * 缩放模式\n\t */\n\tscaleMode: ScaleMode;\n\t/**\n\t * 是否修改画布尺寸\n\t */\n\tmodifyCanvasSize?: boolean;\n\t/**\n\t * 是否自动调整舞台尺寸\n\t */\n\tautoAdjustSize?: boolean;\n\t/**\n\t * 当缩放模式修改时\n\t */\n\tonUpdateScale: Function;\n}\n\n/**\n * 渲染上下文\n */\nexport default class RenderContext {\n\tprotected canvas: HTMLCanvasElement;\n\tprotected canvasContext: CanvasRenderingContext2D;\n\n\tprotected stageWidth: number;\n\tprotected stageHeight: number;\n\n\tprivate _scaleX: number;\n\tprivate _scaleY: number;\n\tprivate _rotation: number = 0;\n\n\tprotected dirtyFieldTriggerLock: boolean = false;\n\n\tprivate onUpdateScale: Function;\n\n\tprivate engine: QunityEngine;\n\n\tconstructor(engine: QunityEngine) {\n\t\tthis.engine = engine;\n\t}\n\n\t/**\n\t * 设计宽度\n\t */\n\t@dirtyFieldTrigger\n\tdesignWidth;\n\t/**\n\t * 设计高度\n\t */\n\t@dirtyFieldTrigger\n\tdesignHeight;\n\t/**\n\t * 缩放模式\n\t */\n\t@dirtyFieldTrigger\n\tscaleMode: ScaleMode;\n\t/**\n\t * 是否修改画布的尺寸\n\t */\n\t@dirtyFieldTrigger\n\tmodifyCanvasSize;\n\t/**\n\t * 是否自动调整舞台尺寸\n\t */\n\t@dirtyFieldTrigger\n\tautoAdjustSize;\n\n\tprivate onModify(value, key, oldValue) {\n\t\tif (!this.dirtyFieldTriggerLock) {\n\t\t\tthis.updateScaleModeSelf();\n\t\t}\n\t}\n\n\t/**\n\t * 装配上下文\n\t * @param options\n\t */\n\tsetup(options: RenderContextOption = <RenderContextOption>{}) {\n\t\tconst {canvas, designWidth, designHeight, scaleMode = ScaleMode.SHOW_ALL, modifyCanvasSize = false, autoAdjustSize = false, onUpdateScale} = options;\n\n\t\tthis.canvas = canvas;\n\t\tthis.canvasContext = canvas.getContext('2d');\n\n\t\tthis.dirtyFieldTriggerLock = true;\n\n\t\tthis.designWidth = designWidth;\n\t\tthis.designHeight = designHeight;\n\t\tthis.scaleMode = scaleMode;\n\t\tthis.modifyCanvasSize = modifyCanvasSize;\n\t\tthis.autoAdjustSize = autoAdjustSize;\n\t\tthis.onUpdateScale = onUpdateScale;\n\n\t\tthis.dirtyFieldTriggerLock = false;\n\n\t\tthis.updateScaleModeSelf();\n\t}\n\n\t/**\n\t * 缩放x\n\t */\n\tget scaleX(): number {\n\t\treturn this._scaleX;\n\t}\n\n\t/**\n\t * 缩放y\n\t */\n\tget scaleY(): number {\n\t\treturn this._scaleY;\n\t}\n\n\t/**\n\t * 旋转\n\t */\n\tget rotation(): number {\n\t\treturn this._rotation;\n\t}\n\n\t/**\n\t * 清空渲染上下文\n\t */\n\tclear() {\n\t\tthis.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\n\t\tthis.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t}\n\n\t/**\n\t * 获取渲染上下文\n\t */\n\tget context() {\n\t\treturn this.canvasContext;\n\t}\n\n\t/**\n\t * 获取舞台尺寸\n\t */\n\tget stageSize() {\n\t\treturn {\n\t\t\twidth: this.stageWidth,\n\t\t\theight: this.stageHeight,\n\t\t}\n\t}\n\n\t/**\n\t * 获取舞台缩放\n\t */\n\tget stageScale() {\n\t\treturn {\n\t\t\tx: this._scaleX,\n\t\t\ty: this._scaleY,\n\t\t}\n\t}\n\n\t/**\n\t * 获取舞台中心\n\t */\n\tget stageCenter() {\n\t\treturn {\n\t\t\tx: this.stageWidth / 2,\n\t\t\ty: this.stageHeight / 2,\n\t\t}\n\t}\n\n\t/**\n\t * 更新缩放模式\n\t */\n\tprivate updateScaleModeSelf() {\n\t\tlet {canvas, designWidth, designHeight, scaleMode, _rotation, modifyCanvasSize} = this;\n\n\t\tlet parent = canvas.parentElement;\n\t\tlet containerWidth = parent.clientWidth;\n\t\tlet containerHeight = parent.clientHeight;\n\n\t\tconst dWidth = designWidth || containerWidth;\n\t\tconst dHeight = designHeight || containerHeight;\n\n\t\tlet width, stageWidth;\n\t\tlet height, stageHeight;\n\n\t\tlet scaleX = containerWidth / dWidth;\n\t\tlet scaleY = containerHeight / dHeight;\n\n\t\tlet styleWidth;\n\t\tlet styleHeight;\n\n\t\t//scale\n\t\tswitch (scaleMode) {\n\t\t\tcase ScaleMode.SHOW_ALL:\n\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.NO_SCALE:\n\t\t\t\tscaleX = scaleY = 1;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.NO_FIXED:\n\t\t\t\tscaleX = scaleY = 1;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.FIXED_WIDTH:\n\t\t\tcase ScaleMode.FIXED_HEIGHT:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t//size\n\t\tswitch (scaleMode) {\n\t\t\tcase ScaleMode.SHOW_ALL:\n\t\t\t\twidth = dWidth;\n\t\t\t\theight = dHeight;\n\n\t\t\t\tstageWidth = dWidth;\n\t\t\t\tstageHeight = dHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.NO_SCALE:\n\t\t\t\twidth = dWidth;\n\t\t\t\theight = dHeight;\n\n\t\t\t\tstageWidth = dWidth;\n\t\t\t\tstageHeight = dHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.NO_FIXED:\n\t\t\t\twidth = containerWidth;\n\t\t\t\theight = containerHeight;\n\n\t\t\t\tstageWidth = dWidth;\n\t\t\t\tstageHeight = dHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.FIXED_WIDTH:\n\t\t\t\twidth = dWidth;\n\t\t\t\tif (modifyCanvasSize) {\n\t\t\t\t\theight = dHeight;\n\t\t\t\t} else {\n\t\t\t\t\theight = containerHeight / scaleX;\n\t\t\t\t}\n\t\t\t\tscaleY = scaleX;\n\n\t\t\t\tstageWidth = width;\n\t\t\t\tstageHeight = height;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.FIXED_HEIGHT:\n\t\t\t\tif (modifyCanvasSize) {\n\t\t\t\t\twidth = dWidth;\n\t\t\t\t} else {\n\t\t\t\t\twidth = containerWidth / scaleY;\n\t\t\t\t}\n\t\t\t\theight = dHeight;\n\t\t\t\tscaleX = scaleY;\n\n\t\t\t\tstageWidth = width;\n\t\t\t\tstageHeight = height;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t//styleSize\n\t\tswitch (scaleMode) {\n\t\t\tcase ScaleMode.SHOW_ALL:\n\t\t\t\tstyleWidth = containerWidth;\n\t\t\t\tstyleHeight = containerHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.NO_FIXED:\n\t\t\t\tstyleWidth = containerWidth;\n\t\t\t\tstyleHeight = containerHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.NO_SCALE:\n\t\t\t\tstyleWidth = designWidth;\n\t\t\t\tstyleHeight = designHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScaleMode.FIXED_WIDTH:\n\t\t\tcase ScaleMode.FIXED_HEIGHT:\n\t\t\t\tstyleWidth = modifyCanvasSize ? designWidth * scaleX : containerWidth;\n\t\t\t\tstyleHeight = modifyCanvasSize ? designHeight * scaleY : containerHeight;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.onUpdateScale(scaleX, scaleY, _rotation);\n\n\t\tthis.stageWidth = stageWidth;\n\t\tthis.stageHeight = stageHeight;\n\t\tthis._scaleX = scaleX;\n\t\tthis._scaleY = scaleY;\n\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\t\tcanvas.style.display = 'block';\n\t\tcanvas.style.width = styleWidth + 'px';\n\t\tcanvas.style.height = styleHeight + 'px';\n\t}\n}\n\n/**\n * 创建canvas\n */\nexport function createCanvas() {\n\treturn document.createElement('canvas');\n}\n","/**\r\n * Created by Administrator on 2017/7/12.\r\n */\r\n\r\nvar lastTime = 0;\r\nvar vendors = ['webkit', 'moz'];\r\nfor(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||    // name has changed in Webkit\r\n      window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n}\r\n\r\nif (!window.requestAnimationFrame) {\r\n    window.requestAnimationFrame = function(callback) {\r\n        var currTime = new Date().getTime();\r\n        var timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\r\n        var id = window.setTimeout(function() {\r\n            callback(currTime + timeToCall);\r\n        }, timeToCall);\r\n        lastTime = currTime + timeToCall;\r\n        return id;\r\n    };\r\n}\r\nif (!window.cancelAnimationFrame) {\r\n    window.cancelAnimationFrame = function(id) {\r\n        clearTimeout(id);\r\n    };\r\n}\r\n","/**\n * Created by rockyl on 2019-04-22.\n *\n * 实体相关工具\n */\n\n/**\n * 属性注入方法\n * @param target 目标对象\n * @param data 被注入对象\n * @param callback 自定义注入方法\n * @param ignoreMethod 是否忽略方法\n * @param ignoreNull 是否忽略Null字段\n *\n * @return 是否有字段注入\n */\nexport function injectProp(target: any, data?: any, callback?: Function, ignoreMethod: boolean = true, ignoreNull: boolean = true): boolean {\n\tif (!target || !data) {\n\t\treturn false;\n\t}\n\n\tlet result = false;\n\tfor (let key in data) {\n\t\tlet value: any = data[key];\n\t\tif ((!ignoreMethod || typeof value != 'function') && (!ignoreNull || value != null) && key.indexOf('_') !== 0 && key.indexOf('$') !== 0) {\n\t\t\tif (callback) {\n\t\t\t\tcallback(target, key, value);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\ttarget[key] = value;\n\t\t\t\t} catch (e) {\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult = true;\n\t\t}\n\t}\n\treturn result;\n}\n","/**\n * Created by rockyl on 2018/11/23.\n *\n * 引擎\n */\n\nimport InteractContext from \"./context/InteractContext\";\nimport RenderContext, {ScaleMode} from \"./context/RenderContext\";\nimport './requestAnimationFrame-polyfill';\nimport {Entity, RootEntity, traverse, traversePostorder} from \"qunity-core\";\nimport {injectProp} from \"./utils\";\n\ninterface EngineConfig {\n\tcanvas?: string | HTMLCanvasElement,\n\tfps?: number,\n\tdesignWidth?: number,\n\tdesignHeight?: number,\n\tscaleMode?: ScaleMode\n\ttouchEnabled?: boolean,\n\tmodifyCanvasSize?: boolean,\n}\n\n/**\n * 引擎类\n */\nexport class QunityEngine {\n\t/**\n\t * 默认配置\n\t */\n\treadonly engineConfig: EngineConfig = {\n\t\tcanvas: 'gameCanvas',\n\t\tfps: 60,\n\t\tdesignWidth: 750,\n\t\tdesignHeight: 1334,\n\t\tscaleMode: ScaleMode.FIXED_WIDTH,\n\t\ttouchEnabled: true,\n\t};\n\t/**\n\t * 自定义配置\n\t */\n\treadonly customConfig: any = {};\n\n\tprivate _root: RootEntity;\n\tprivate _canvasElement: HTMLCanvasElement;\n\n\tprivate _flush = 0;\n\tprivate _currentFlush = 0;\n\tprivate tsStart;\n\tprivate tsLast;\n\tprivate lastFPS = 0;\n\tprivate tickId;\n\n\tprivate _renderContext: RenderContext;\n\tprivate _interactContext: InteractContext;\n\n\tprivate nextTicks = [];\n\n\tprivate defMap = {};\n\n\t/**\n\t * 注册组件\n\t * @param name\n\t * @param def\n\t */\n\tregisterDef(name: string, def) {\n\t\tthis.defMap[name] = def;\n\t\tdef.__class__ = name;\n\t}\n\n\t/**\n\t * 注册组件\n\t * @param name\n\t */\n\tunregisterDef(name: string) {\n\t\tdelete this.defMap[name];\n\t}\n\n\t/**\n\t * 根据名称获取定义\n\t * @param name\n\t * @param showWarn\n\t */\n\tgetDefByName(name: string, showWarn: boolean = true): any {\n\t\tlet def;\n\t\t/*if (name.indexOf('/') >= 0) {//addition\n\t\t\tname = name.substr(name.lastIndexOf('/') + 1);\n\t\t}*/\n\n\t\tdef = this.defMap[name];\n\t\tif (!def && showWarn) {\n\t\t\tconsole.warn('missing def:', name);\n\t\t\treturn;\n\t\t}\n\n\t\treturn def;\n\t}\n\n\tconstructor() {\n\n\t}\n\n\t/**\n\t * 装配引擎\n\t * @param _engineConfig\n\t * @param _customConfig\n\t * @param _dataCenterConfig\n\t */\n\tsetup(_engineConfig?: EngineConfig, _customConfig?, _dataCenterConfig?) {\n\t\tinjectProp(this.engineConfig, _engineConfig);\n\t\tinjectProp(this.customConfig, _customConfig);\n\n\t\tconst {canvas, designWidth, designHeight, scaleMode, modifyCanvasSize, touchEnabled} = this.engineConfig;\n\n\t\tthis._canvasElement = typeof canvas == 'string' ? <HTMLCanvasElement>document.getElementById(canvas) : canvas;\n\n\t\tthis._interactContext = new InteractContext(this);\n\t\tthis._interactContext.setup({\n\t\t\tcanvas: this._canvasElement,\n\t\t\ttouchHandlers: {\n\t\t\t\tonTouchBegin: this.onTouchBegin.bind(this),\n\t\t\t\tonTouchMove: this.onTouchMove.bind(this),\n\t\t\t\tonTouchEnd: this.onTouchEnd.bind(this),\n\t\t\t},\n\t\t\ttouchEnabled,\n\t\t});\n\n\t\tthis._renderContext = new RenderContext(this);\n\t\tthis._renderContext.setup({\n\t\t\tcanvas: this._canvasElement,\n\t\t\tdesignWidth,\n\t\t\tdesignHeight,\n\t\t\tscaleMode,\n\t\t\tmodifyCanvasSize,\n\t\t\tonUpdateScale: this.onUpdateScale.bind(this),\n\t\t});\n\n\t\tthis._root = new RootEntity();\n\t}\n\n\t/**\n\t * 开始引擎\n\t */\n\tstart() {\n\t\tthis._root.enabled = true;\n\n\t\tthis.tsStart = -1;\n\t\tthis.startTick();\n\t}\n\n\t/**\n\t * 暂停引擎\n\t */\n\tpause() {\n\t\tthis._root.enabled = false;\n\n\t\tthis.stopTick();\n\t}\n\n\t/**\n\t * 获取根Entity\n\t */\n\tget root(): Entity {\n\t\treturn this._root;\n\t}\n\n\t/**\n\t * 获取实体路径\n\t * @param entity\n\t */\n\tgetEntityPath(entity?: Entity): string {\n\t\tlet path = '';\n\t\tlet current = entity || this._root;\n\t\twhile (current.parent) {\n\t\t\tpath = current.parent.children.indexOf(current) + (path.length > 0 ? '|' : '') + path;\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn path;\n\t}\n\n\t/**\n\t * 根据实体路径获取实体\n\t * @param path\n\t */\n\tgetEntityByPath(path?: string): Entity {\n\t\tlet target = this._root;\n\n\t\tif (path.length > 0) {\n\t\t\tlet arr = path.split('|');\n\t\t\tfor (let item of arr) {\n\t\t\t\ttarget = target.children[item];\n\t\t\t\tif (!target) {\n\t\t\t\t\ttarget = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn target;\n\t}\n\n\t/**\n\t * 获取当前帧率\n\t */\n\tgetFPS() {\n\t\treturn this.lastFPS;\n\t}\n\n\t/**\n\t * 获取渲染上下文\n\t */\n\tget renderContext(): RenderContext {\n\t\treturn this._renderContext;\n\t}\n\n\t/**\n\t * 获取交互上下文\n\t */\n\tget interactContext(): InteractContext {\n\t\treturn this._interactContext;\n\t}\n\n\tget canvasElement(): HTMLCanvasElement {\n\t\treturn this._canvasElement;\n\t}\n\n\tprivate onUpdateScale(scaleX, scaleY, rotation) {\n\t\tthis._interactContext.updateScale(scaleX, scaleY, rotation)\n\t}\n\n\t/**\n\t * 开始时钟\n\t */\n\tprivate startTick() {\n\t\tthis._flush = 60 / this.engineConfig.fps - 1 >> 0;\n\t\tif (this._flush < 0) {\n\t\t\tthis._flush = 0;\n\t\t}\n\n\t\tthis.tickId = requestAnimationFrame(this.flush);\n\t}\n\n\t/**\n\t * 停止时钟\n\t */\n\tprivate stopTick() {\n\t\tcancelAnimationFrame(this.tickId);\n\t}\n\n\t/**\n\t * 时钟触发\n\t */\n\tprivate flush = (tsNow): void => {\n\t\tif (this._flush == 0) {\n\t\t\tthis.onFrameTick(tsNow);\n\t\t} else {\n\t\t\tif (this._currentFlush == 0) {\n\t\t\t\tthis.onFrameTick(tsNow);\n\t\t\t\tthis._currentFlush = this._flush;\n\t\t\t} else {\n\t\t\t\tthis._currentFlush--;\n\t\t\t}\n\t\t}\n\n\t\tthis.tickId = requestAnimationFrame(this.flush);\n\t};\n\n\t/**\n\t * 下一帧执行\n\t * @param func\n\t * @param tickCount\n\t */\n\tnextTick(func, tickCount = 1) {\n\t\tthis.nextTicks.push({func, tickCount});\n\t}\n\n\tprivate onFrameTick(tsNow) {\n\t\tif (this.tsStart < 0) {\n\t\t\tthis.tsStart = tsNow;\n\t\t}\n\n\t\tthis._renderContext.clear();\n\t\tthis.lastFPS = Math.floor(1000 / (tsNow - this.tsLast));\n\t\tthis.tsLast = tsNow;\n\t\tconst ts = Math.floor(tsNow - this.tsStart);\n\t\ttraverse(this._root, function (child) {\n\t\t\tif (!child.isFree && child.enabled) {\n\t\t\t\tchild.components.onUpdate(ts);\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, -1, true, function (current) {\n\t\t\tcurrent.components.afterUpdate(ts);\n\t\t});\n\n\t\tfor (let i = 0, li = this.nextTicks.length; i < li; i++) {\n\t\t\tconst item = this.nextTicks[i];\n\n\t\t\titem.tickCount--;\n\t\t\tif (item.tickCount <= 0) {\n\t\t\t\titem.func(ts);\n\n\t\t\t\tthis.nextTicks.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t\tli--;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 代理出来的onTouchBegin方法\n\t * @param event\n\t */\n\tprivate onTouchBegin(event) {\n\t\ttraversePostorder(this._root, function (child) {\n\t\t\treturn child.components.onInteract(0, event);\n\t\t})\n\t}\n\n\t/**\n\t * 代理出来的onTouchMove方法\n\t * @param event\n\t */\n\tprivate onTouchMove(event) {\n\t\ttraversePostorder(this._root, function (child) {\n\t\t\treturn child.components.onInteract(1, event);\n\t\t})\n\t}\n\n\t/**\n\t * 代理出来的onTouchEnd方法\n\t * @param event\n\t */\n\tprivate onTouchEnd(event) {\n\t\ttraversePostorder(this._root, function (child) {\n\t\t\treturn child.components.onInteract(2, event);\n\t\t})\n\t}\n}\n","/**\n * Created by rockyl on 2018/11/6.\n *\n */\nimport {HashObject} from \"qunity-core\";\nimport {dirtyFieldTrigger} from \"../decorators\";\n\n/**\n * 2D矢量\n */\nexport class Vector2D extends HashObject {\n\t/**\n\t * x分量\n\t */\n\t@dirtyFieldTrigger\n\tx: number;\n\t/**\n\t * y分量\n\t */\n\t@dirtyFieldTrigger\n\ty: number;\n\n\tonChange: Function;\n\n\t/**\n\t * 创建一个2D矢量\n\t * @param x x分量\n\t * @param y y分量\n\t * @param onChange 当改变时触发\n\t */\n\tconstructor(x: number = 0, y: number = 0, onChange?: Function) {\n\t\tsuper();\n\n\t\tthis.onChange = onChange;\n\n\t\tthis.setXY(x, y);\n\t}\n\n\tonModify(value, key, oldValue) {\n\t\tthis.onChange && this.onChange(value, key, oldValue);\n\t}\n\n\t/**\n\t * 设置分量\n\t * @param x\n\t * @param y\n\t */\n\tsetXY(x: number = 0, y: number = 0): Vector2D {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * 从一个向量拷贝分量\n\t * @param v2\n\t */\n\tcopyFrom(v2): Vector2D {\n\t\tthis.x = v2.x;\n\t\tthis.y = v2.y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 克隆出一个向量\n\t */\n\tclone(): Vector2D {\n\t\treturn new Vector2D(this.x, this.y);\n\t}\n\n\t/**\n\t * 把向量置空\n\t */\n\tzero(): Vector2D {\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * 是不是一个0向量\n\t */\n\tget isZero(): boolean {\n\t\treturn this.x == 0 && this.y == 0;\n\t}\n\n\t/**\n\t * 单位化向量\n\t */\n\tnormalize(): Vector2D {\n\t\tlet len = this.length;\n\t\tif (len == 0) {\n\t\t\tthis.x = 1;\n\t\t\treturn this;\n\t\t}\n\t\tthis.x /= len;\n\t\tthis.y /= len;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 是不是一个单位向量\n\t */\n\tget isNormalized(): boolean {\n\t\treturn this.length == 1.0;\n\t}\n\n\t/**\n\t * 截取向量长度\n\t * @param max\n\t */\n\ttruncate(max): Vector2D {\n\t\tthis.length = Math.min(max, this.length);\n\t\treturn this;\n\t}\n\n\t/**\n\t * 向量反向\n\t */\n\treverse(): Vector2D {\n\t\tthis.x = -this.x;\n\t\tthis.y = -this.y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 获取点乘\n\t * @param v2\n\t */\n\tdotProd(v2): number {\n\t\treturn this.x * v2.x + this.y * v2.y;\n\t}\n\n\t/**\n\t * 获取叉乘\n\t * @param v2\n\t */\n\tcrossProd(v2): number {\n\t\treturn this.x * v2.y - this.y * v2.x;\n\t}\n\n\t/**\n\t * 获取长度的平方\n\t * @param v2\n\t */\n\tdistSQ(v2): number {\n\t\tlet dx = v2.x - this.x;\n\t\tlet dy = v2.y - this.y;\n\t\treturn dx * dx + dy * dy;\n\t}\n\n\t/**\n\t * 获取两个向量的距离\n\t * @param v2\n\t */\n\tdistance(v2): number {\n\t\treturn Math.sqrt(this.distSQ(v2));\n\t}\n\n\t/**\n\t * 向量加法\n\t * @param v2\n\t */\n\tadd(v2): Vector2D {\n\t\tthis.x += v2.x;\n\t\tthis.y += v2.y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 向量减法\n\t * @param v2\n\t */\n\tsubtract(v2): Vector2D {\n\t\tthis.x -= v2.x;\n\t\tthis.y -= v2.y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 向量乘于某个数\n\t * @param value\n\t */\n\tmultiply(value: number): Vector2D {\n\t\tthis.x *= value;\n\t\tthis.y *= value;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 向量除于某个数\n\t * @param value\n\t */\n\tdivide(value: number): Vector2D {\n\t\tthis.x /= value;\n\t\tthis.y /= value;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 向量角度\n\t * @param value\n\t */\n\tset angle(value: number) {\n\t\tthis.radian = value * Math.PI / 180;\n\t}\n\n\tget angle(): number {\n\t\treturn this.radian * 180 / Math.PI;\n\t}\n\n\t/**\n\t * 向量弧度\n\t * @param value\n\t */\n\tset radian(value: number) {\n\t\tlet len = this.length;\n\t\tthis.setXY(Math.cos(value) * len, Math.sin(value) * len);\n\t}\n\n\tget radian(): number {\n\t\treturn Math.atan2(this.y, this.x);\n\t}\n\n\t/**\n\t * 是否等于某个向量\n\t * @param v2\n\t */\n\tequals(v2): boolean {\n\t\treturn this.x == v2.x && this.y == v2.y;\n\t}\n\n\t/**\n\t * 向量长度\n\t * @param value\n\t */\n\tget length(): number {\n\t\treturn Math.sqrt(this.lengthSQ);\n\t}\n\n\tset length(value: number) {\n\t\tlet a = this.radian;\n\t\tthis.setXY(Math.cos(a) * value, Math.sin(a) * value);\n\t}\n\n\t/**\n\t * 获取向量长度的平方\n\t */\n\tget lengthSQ(): number {\n\t\treturn this.x * this.x + this.y * this.y;\n\t}\n\n\t/**\n\t * 获取向量斜率\n\t */\n\tget slope(): number {\n\t\treturn this.y / this.x;\n\t}\n\n\ttoString(): string {\n\t\treturn \"[Vector2D (x:\" + this.x + \", y:\" + this.y + \")]\";\n\t}\n\n\ttoObj() {\n\t\treturn {x: this.x, y: this.y}\n\t}\n\n\ttoArray() {\n\t\treturn [this.x, this.y];\n\t}\n\n\tstatic corner(v1, v2) {\n\t\treturn Math.acos(v1.dotProd(v2) / (v1.length * v2.length));\n\t}\n}\n","/**\n * Created by rockyl on 2018/11/6.\n *\n * 矩阵 3x3\n */\n\nlet PI = Math.PI;\nlet TwoPI = PI * 2;\nlet DEG_TO_RAD = PI / 180;\n\n/**\n * Matrix 类表示一个转换矩阵，它确定如何将点从一个坐标空间映射到另一个坐标空间。\n * 您可以对一个显示对象执行不同的图形转换，方法是设置 Matrix 对象的属性，将该 Matrix\n * 对象应用于显示对象的 matrix 属性。这些转换函数包括平移（x 和 y 重新定位）、旋转、缩放和倾斜。\n */\nexport class Matrix {\n\ta;\n\tb;\n\tc;\n\td;\n\ttx;\n\tty;\n\n\t/**\n\t * 使用指定参数创建一个 Matrix 对象\n\t * @param a 缩放或旋转图像时影响像素沿 x 轴定位的值。\n\t * @param b 旋转或倾斜图像时影响像素沿 y 轴定位的值。\n\t * @param c 旋转或倾斜图像时影响像素沿 x 轴定位的值。\n\t * @param d 缩放或旋转图像时影响像素沿 y 轴定位的值。\n\t * @param tx 沿 x 轴平移每个点的距离。\n\t * @param ty 沿 y 轴平移每个点的距离。\n\t */\n\tconstructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\t\tthis.d = d;\n\t\tthis.tx = tx;\n\t\tthis.ty = ty;\n\t}\n\n\t/**\n\t * 返回一个新的 Matrix 对象，它是此矩阵的克隆，带有与所含对象完全相同的副本。\n\t */\n\tclone() {\n\t\treturn new Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty);\n\t}\n\n\t/**\n\t * 将某个矩阵与当前矩阵连接，从而将这两个矩阵的几何效果有效地结合在一起。在数学术语中，将两个矩阵连接起来与使用矩阵乘法将它们结合起来是相同的。\n\t * @param other 要连接到源矩阵的矩阵。\n\t */\n\tconcat(other) {\n\t\tlet a = this.a * other.a;\n\t\tlet b = 0.0;\n\t\tlet c = 0.0;\n\t\tlet d = this.d * other.d;\n\t\tlet tx = this.tx * other.a + other.tx;\n\t\tlet ty = this.ty * other.d + other.ty;\n\n\t\tif (this.b !== 0.0 || this.c !== 0.0 || other.b !== 0.0 || other.c !== 0.0) {\n\t\t\ta += this.b * other.c;\n\t\t\td += this.c * other.b;\n\t\t\tb += this.a * other.b + this.b * other.d;\n\t\t\tc += this.c * other.a + this.d * other.c;\n\t\t\ttx += this.ty * other.c;\n\t\t\tty += this.tx * other.b;\n\t\t}\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\t\tthis.d = d;\n\t\tthis.tx = tx;\n\t\tthis.ty = ty;\n\t}\n\n\t/**\n\t * 将源 Matrix 对象中的所有矩阵数据复制到调用方 Matrix 对象中。\n\t * @param other 要拷贝的目标矩阵\n\t */\n\tcopyFrom(other) {\n\t\tthis.a = other.a;\n\t\tthis.b = other.b;\n\t\tthis.c = other.c;\n\t\tthis.d = other.d;\n\t\tthis.tx = other.tx;\n\t\tthis.ty = other.ty;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 为每个矩阵属性设置一个值，该值将导致矩阵无转换。通过应用恒等矩阵转换的对象将与原始对象完全相同。\n\t * 调用 identity() 方法后，生成的矩阵具有以下属性：a=1、b=0、c=0、d=1、tx=0 和 ty=0。\n\t */\n\tidentity() {\n\t\tthis.a = this.d = 1;\n\t\tthis.b = this.c = this.tx = this.ty = 0;\n\t}\n\n\t/**\n\t * 执行原始矩阵的逆转换。\n\t * 您可以将一个逆矩阵应用于对象来撤消在应用原始矩阵时执行的转换。\n\t */\n\tinvert() {\n\t\tthis.$invertInto(this);\n\t}\n\n\t/**\n\t * @private\n\t */\n\t$invertInto(target) {\n\t\tlet a = this.a;\n\t\tlet b = this.b;\n\t\tlet c = this.c;\n\t\tlet d = this.d;\n\t\tlet tx = this.tx;\n\t\tlet ty = this.ty;\n\t\tif (b == 0 && c == 0) {\n\t\t\ttarget.b = target.c = 0;\n\t\t\tif (a == 0 || d == 0) {\n\t\t\t\ttarget.a = target.d = target.tx = target.ty = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ta = target.a = 1 / a;\n\t\t\t\td = target.d = 1 / d;\n\t\t\t\ttarget.tx = -a * tx;\n\t\t\t\ttarget.ty = -d * ty;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tlet determinant = a * d - b * c;\n\t\tif (determinant == 0) {\n\t\t\ttarget.identity();\n\t\t\treturn;\n\t\t}\n\t\tdeterminant = 1 / determinant;\n\t\tlet k = target.a = d * determinant;\n\t\tb = target.b = -b * determinant;\n\t\tc = target.c = -c * determinant;\n\t\td = target.d = a * determinant;\n\t\ttarget.tx = -(k * tx + c * ty);\n\t\ttarget.ty = -(b * tx + d * ty);\n\t}\n\n\t/**\n\t * 对 Matrix 对象应用旋转转换。\n\t * rotate() 方法将更改 Matrix 对象的 a、b、c 和 d 属性。\n\t * @param radian 以弧度为单位的旋转角度。\n\t */\n\trotate(radian) {\n\t\tradian = +radian;\n\t\tif (radian !== 0) {\n\t\t\t//angle = angle / DEG_TO_RAD;\n\t\t\tlet u = Math.cos(radian);\n\t\t\tlet v = Math.sin(radian);\n\t\t\tconst {a, b, c, d, tx, ty} = this;\n\t\t\tthis.a = a * u - b * v;\n\t\t\tthis.b = a * v + b * u;\n\t\t\tthis.c = c * u - d * v;\n\t\t\tthis.d = c * v + d * u;\n\t\t\tthis.tx = tx * u - ty * v;\n\t\t\tthis.ty = tx * v + ty * u;\n\t\t}\n\t}\n\n\t/**\n\t * 获取弧度\n\t */\n\tget rotation(){\n\t\treturn Math.atan2(this.b, this.a);\n\t}\n\n\t/**\n\t * 对矩阵应用缩放转换。x 轴乘以 sx，y 轴乘以 sy。\n\t * scale() 方法将更改 Matrix 对象的 a 和 d 属性。\n\t * @param sx 用于沿 x 轴缩放对象的乘数。\n\t * @param sy 用于沿 y 轴缩放对象的乘数。\n\t */\n\tscale(sx, sy) {\n\t\tif (sx !== 1) {\n\t\t\tthis.a *= sx;\n\t\t\tthis.c *= sx;\n\t\t\tthis.tx *= sx;\n\t\t}\n\t\tif (sy !== 1) {\n\t\t\tthis.b *= sy;\n\t\t\tthis.d *= sy;\n\t\t\tthis.ty *= sy;\n\t\t}\n\t}\n\n\t/**\n\t * 将 Matrix 的成员设置为指定值\n\t * @param a 缩放或旋转图像时影响像素沿 x 轴定位的值。\n\t * @param b 旋转或倾斜图像时影响像素沿 y 轴定位的值。\n\t * @param c 旋转或倾斜图像时影响像素沿 x 轴定位的值。\n\t * @param d 缩放或旋转图像时影响像素沿 y 轴定位的值。\n\t * @param tx 沿 x 轴平移每个点的距离。\n\t * @param ty 沿 y 轴平移每个点的距离。\n\t */\n\tsetTo(a, b, c, d, tx, ty) {\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\t\tthis.d = d;\n\t\tthis.tx = tx;\n\t\tthis.ty = ty;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 返回将 Matrix 对象表示的几何转换应用于指定点所产生的结果。\n\t * @param pointX 想要获得其矩阵转换结果的点的x坐标。\n\t * @param pointY 想要获得其矩阵转换结果的点的y坐标。\n\t * @param resultPoint 框架建议尽可能减少创建对象次数来优化性能，可以从外部传入一个复用的Point对象来存储结果，若不传入将创建一个新的Point对象返回。\n\t * @returns Object 由应用矩阵转换所产生的点。\n\t */\n\ttransformPoint(pointX, pointY, resultPoint) {\n\t\tconst {a, b, c, d, tx, ty} = this;\n\t\tlet x = a * pointX + c * pointY + tx;\n\t\tlet y = b * pointX + d * pointY + ty;\n\t\tif (resultPoint) {\n\t\t\tresultPoint.x = x;\n\t\t\tresultPoint.y = y;\n\t\t\treturn resultPoint;\n\t\t}\n\t\treturn {x, y};\n\t}\n\n\t/**\n\t * 如果给定预转换坐标空间中的点，则此方法返回发生转换后该点的坐标。\n\t * 与使用 transformPoint() 方法应用的标准转换不同，deltaTransformPoint() 方法的转换不考虑转换参数 tx 和 ty。\n\t * @param pointX 想要获得其矩阵转换结果的点的x坐标。\n\t * @param pointY 想要获得其矩阵转换结果的点的y坐标。\n\t * @param resultPoint 框架建议尽可能减少创建对象次数来优化性能，可以从外部传入一个复用的Point对象来存储结果，若不传入将创建一个新的Point对象返回。\n\t */\n\tdeltaTransformPoint(pointX, pointY, resultPoint) {\n\t\tconst {a, b, c, d} = this;\n\t\tlet x = a * pointX + c * pointY;\n\t\tlet y = b * pointX + d * pointY;\n\n\t\tif (resultPoint) {\n\t\t\tresultPoint.x = x;\n\t\t\tresultPoint.y = y;\n\t\t\treturn resultPoint;\n\t\t}\n\t\treturn {x, y};\n\t}\n\n\t/**\n\t * 沿 x 和 y 轴平移矩阵，由 dx 和 dy 参数指定。\n\t * @param dx 沿 x 轴向右移动的量（以像素为单位）。\n\t * @param dy 沿 y 轴向下移动的量（以像素为单位）。\n\t */\n\ttranslate(dx, dy) {\n\t\tthis.tx += dx;\n\t\tthis.ty += dy;\n\t}\n\n\t/**\n\t * 是否与另一个矩阵数据相等\n\t * @param other 要比较的另一个矩阵对象。\n\t * @returns 是否相等，ture表示相等。\n\t */\n\tequals(other) {\n\t\treturn this.a == other.a && this.b == other.b &&\n\t\t\tthis.c == other.c && this.d == other.d &&\n\t\t\tthis.tx == other.tx && this.ty == other.ty;\n\t}\n\n\t/**\n\t * 前置矩阵\n\t * @param a 缩放或旋转图像时影响像素沿 x 轴定位的值\n\t * @param b 缩放或旋转图像时影响像素沿 y 轴定位的值\n\t * @param c 缩放或旋转图像时影响像素沿 x 轴定位的值\n\t * @param d 缩放或旋转图像时影响像素沿 y 轴定位的值\n\t * @param tx 沿 x 轴平移每个点的距离\n\t * @param ty 沿 y 轴平移每个点的距离\n\t * @returns 矩阵自身\n\t */\n\tprepend(a, b, c, d, tx, ty) {\n\t\tlet tx1 = this.tx;\n\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\n\t\t\tlet a1 = this.a;\n\t\t\tlet c1 = this.c;\n\t\t\tthis.a = a1 * a + this.b * c;\n\t\t\tthis.b = a1 * b + this.b * d;\n\t\t\tthis.c = c1 * a + this.d * c;\n\t\t\tthis.d = c1 * b + this.d * d;\n\t\t}\n\t\tthis.tx = tx1 * a + this.ty * c + tx;\n\t\tthis.ty = tx1 * b + this.ty * d + ty;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 后置矩阵\n\t * @param a 缩放或旋转图像时影响像素沿 x 轴定位的值\n\t * @param b 缩放或旋转图像时影响像素沿 y 轴定位的值\n\t * @param c 缩放或旋转图像时影响像素沿 x 轴定位的值\n\t * @param d 缩放或旋转图像时影响像素沿 y 轴定位的值\n\t * @param tx 沿 x 轴平移每个点的距离\n\t * @param ty 沿 y 轴平移每个点的距离\n\t * @returns 矩阵自身\n\t */\n\tappend(a, b, c, d, tx, ty) {\n\t\tlet a1 = this.a;\n\t\tlet b1 = this.b;\n\t\tlet c1 = this.c;\n\t\tlet d1 = this.d;\n\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\n\t\t\tthis.a = a * a1 + b * c1;\n\t\t\tthis.b = a * b1 + b * d1;\n\t\t\tthis.c = c * a1 + d * c1;\n\t\t\tthis.d = c * b1 + d * d1;\n\t\t}\n\t\tthis.tx = tx * a1 + ty * c1 + this.tx;\n\t\tthis.ty = tx * b1 + ty * d1 + this.ty;\n\t\treturn this;\n\t}\n\n\t/**\n\t * 返回将 Matrix 对象表示的几何转换应用于指定点所产生的结果。\n\t * @returns 一个字符串，它包含 Matrix 对象的属性值：a、b、c、d、tx 和 ty。\n\t */\n\ttoString() {\n\t\treturn \"(a=\" + this.a + \", b=\" + this.b + \", c=\" + this.c + \", d=\" + this.d + \", tx=\" + this.tx + \", ty=\" + this.ty + \")\";\n\t}\n\n\t/**\n\t * 包括用于缩放、旋转和转换的参数。当应用于矩阵时，该方法会基于这些参数设置矩阵的值。\n\t * @param scaleX 水平缩放所用的系数\n\t * @param scaleY 垂直缩放所用的系数\n\t * @param rotation 旋转量（以弧度为单位）\n\t * @param tx 沿 x 轴向右平移（移动）的像素数\n\t * @param ty 沿 y 轴向下平移（移动）的像素数\n\t */\n\tcreateBox(scaleX, scaleY, rotation = 0, tx = 0, ty = 0) {\n\t\tlet self = this;\n\t\tif (rotation !== 0) {\n\t\t\trotation = rotation / DEG_TO_RAD;\n\t\t\tlet u = Math.cos(rotation);\n\t\t\tlet v = Math.sin(rotation);\n\t\t\tself.a = u * scaleX;\n\t\t\tself.b = v * scaleY;\n\t\t\tself.c = -v * scaleX;\n\t\t\tself.d = u * scaleY;\n\t\t} else {\n\t\t\tself.a = scaleX;\n\t\t\tself.b = 0;\n\t\t\tself.c = 0;\n\t\t\tself.d = scaleY;\n\t\t}\n\t\tself.tx = tx;\n\t\tself.ty = ty;\n\t}\n\n\t/**\n\t * 创建 Graphics 类的 beginGradientFill() 和 lineGradientStyle() 方法所需的矩阵的特定样式。\n\t * 宽度和高度被缩放为 scaleX/scaleY 对，而 tx/ty 值偏移了宽度和高度的一半。\n\t * @param width 渐变框的宽度\n\t * @param height 渐变框的高度\n\t * @param rotation 旋转量（以弧度为单位）\n\t * @param tx 沿 x 轴向右平移的距离（以像素为单位）。此值将偏移 width 参数的一半\n\t * @param ty 沿 y 轴向下平移的距离（以像素为单位）。此值将偏移 height 参数的一半\n\t */\n\tcreateGradientBox(width, height, rotation = 0, tx = 0, ty = 0) {\n\t\tthis.createBox(width / 1638.4, height / 1638.4, rotation, tx + width / 2, ty + height / 2);\n\t}\n\n\t/**\n\t * @private\n\t */\n\t$transformBounds(bounds) {\n\t\tlet a = this.a;\n\t\tlet b = this.b;\n\t\tlet c = this.c;\n\t\tlet d = this.d;\n\t\tlet tx = this.tx;\n\t\tlet ty = this.ty;\n\n\t\tlet x = bounds.x;\n\t\tlet y = bounds.y;\n\t\tlet xMax = x + bounds.width;\n\t\tlet yMax = y + bounds.height;\n\n\t\tlet x0 = a * x + c * y + tx;\n\t\tlet y0 = b * x + d * y + ty;\n\t\tlet x1 = a * xMax + c * y + tx;\n\t\tlet y1 = b * xMax + d * y + ty;\n\t\tlet x2 = a * xMax + c * yMax + tx;\n\t\tlet y2 = b * xMax + d * yMax + ty;\n\t\tlet x3 = a * x + c * yMax + tx;\n\t\tlet y3 = b * x + d * yMax + ty;\n\n\t\tlet tmp = 0;\n\n\t\tif (x0 > x1) {\n\t\t\ttmp = x0;\n\t\t\tx0 = x1;\n\t\t\tx1 = tmp;\n\t\t}\n\t\tif (x2 > x3) {\n\t\t\ttmp = x2;\n\t\t\tx2 = x3;\n\t\t\tx3 = tmp;\n\t\t}\n\n\t\tbounds.x = Math.floor(x0 < x2 ? x0 : x2);\n\t\tbounds.width = Math.ceil((x1 > x3 ? x1 : x3) - bounds.x);\n\n\t\tif (y0 > y1) {\n\t\t\ttmp = y0;\n\t\t\ty0 = y1;\n\t\t\ty1 = tmp;\n\t\t}\n\t\tif (y2 > y3) {\n\t\t\ttmp = y2;\n\t\t\ty2 = y3;\n\t\t\ty3 = tmp;\n\t\t}\n\n\t\tbounds.y = Math.floor(y0 < y2 ? y0 : y2);\n\t\tbounds.height = Math.ceil((y1 > y3 ? y1 : y3) - bounds.y);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetDeterminant() {\n\t\treturn this.a * this.d - this.b * this.c;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t$getScaleX() {\n\t\tlet m = this;\n\t\tif (m.b == 0) {\n\t\t\treturn m.a;\n\t\t}\n\t\tlet result = Math.sqrt(m.a * m.a + m.b * m.b);\n\t\treturn this.getDeterminant() < 0 ? -result : result;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t$getScaleY() {\n\t\tlet m = this;\n\t\tif (m.c == 0) {\n\t\t\treturn m.d;\n\t\t}\n\t\tlet result = Math.sqrt(m.c * m.c + m.d * m.d);\n\t\treturn this.getDeterminant() < 0 ? -result : result;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t$getSkewX() {\n\t\tif (this.d < 0) {\n\t\t\treturn Math.atan2(this.d, this.c) + (PI / 2);\n\t\t}\n\t\telse {\n\t\t\treturn Math.atan2(this.d, this.c) - (PI / 2);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\t$getSkewY() {\n\t\tif (this.a < 0) {\n\t\t\treturn Math.atan2(this.b, this.a) - PI;\n\t\t}\n\t\telse {\n\t\t\treturn Math.atan2(this.b, this.a);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\t$updateScaleAndRotation(scaleX, scaleY, skewX, skewY) {\n\t\tif ((skewX == 0 || skewX == TwoPI) && (skewY == 0 || skewY == TwoPI)) {\n\t\t\tthis.a = scaleX;\n\t\t\tthis.b = this.c = 0;\n\t\t\tthis.d = scaleY;\n\t\t\treturn;\n\t\t}\n\t\tskewX = skewX / DEG_TO_RAD;\n\t\tskewY = skewY / DEG_TO_RAD;\n\t\tlet u = Math.cos(skewX);\n\t\tlet v = Math.sin(skewX);\n\t\tif (skewX == skewY) {\n\t\t\tthis.a = u * scaleX;\n\t\t\tthis.b = v * scaleX;\n\t\t} else {\n\t\t\tthis.a = Math.cos(skewY) * scaleX;\n\t\t\tthis.b = Math.sin(skewY) * scaleX;\n\t\t}\n\t\tthis.c = -v * scaleY;\n\t\tthis.d = u * scaleY;\n\t}\n\n\t/**\n\t * @private\n\t * target = other * this\n\t */\n\t$preMultiplyInto(other, target) {\n\t\tlet a = other.a * this.a;\n\t\tlet b = 0.0;\n\t\tlet c = 0.0;\n\t\tlet d = other.d * this.d;\n\t\tlet tx = other.tx * this.a + this.tx;\n\t\tlet ty = other.ty * this.d + this.ty;\n\n\t\tif (other.b !== 0.0 || other.c !== 0.0 || this.b !== 0.0 || this.c !== 0.0) {\n\t\t\ta += other.b * this.c;\n\t\t\td += other.c * this.b;\n\t\t\tb += other.a * this.b + other.b * this.d;\n\t\t\tc += other.c * this.a + other.d * this.c;\n\t\t\ttx += other.ty * this.c;\n\t\t\tty += other.tx * this.b;\n\t\t}\n\n\t\ttarget.a = a;\n\t\ttarget.b = b;\n\t\ttarget.c = c;\n\t\ttarget.d = d;\n\t\ttarget.tx = tx;\n\t\ttarget.ty = ty;\n\t}\n\n\ttoArray(){\n\t\treturn [this.a, this.b, this.c, this.d, this.tx, this.ty];\n\t}\n}\n    ","/**\n * Created by rockyl on 2019-08-01.\n */\n\nimport {QunityEngine} from \"../../src\";\n\nexport const engine = new QunityEngine();\nengine.setup({});\n","/**\n * Created by rockyl on 2019-07-29.\n */\n\nimport {Component} from \"qunity-core\";\nimport {Matrix,} from \"../../src\";\nimport {engine} from \"./engine\";\n\nlet root = engine.root;\n\nlet ctx = engine.renderContext.context;\n\nclass GraphicsTest extends Component {\n\tprivate _matrix = new Matrix();\n\n\tonAwake(): void {\n\n\t}\n\n\tonUpdate(t: number): void {\n\t\tconst r = t * 0.002;\n\n\t\tconst matrix = this._matrix;\n\n\t\tmatrix.identity();\n\t\tmatrix.rotate(r * 2);\n\t\tmatrix.translate(Math.cos(r) * 50 + 200, Math.sin(r) * 50 + 200);\n\n\t\tctx.setTransform.apply(ctx, matrix.toArray());\n\t\tctx.fillStyle = 'yellow';\n\t\tctx.fillRect(-50, -50, 100, 100);\n\t}\n}\n\nlet comp = new GraphicsTest();\nroot.components.add(comp);\n\nengine.start();\n"],"names":["tslib_1.__decorate","RootEntity","traverse","traversePostorder","tslib_1.__extends","HashObject","Component"],"mappings":"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"}